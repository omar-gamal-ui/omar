<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>إضافة إعلان</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white p-6">

  <h1 class="text-3xl font-bold text-center mb-6">إضافة إعلان جديد</h1>

  <form id="adForm" class="bg-gray-800 p-6 rounded-lg space-y-4 max-w-lg mx-auto">
    <input type="text" id="name" placeholder="الاسم" required class="w-full p-3 rounded text-black">
    <input type="file" id="image" accept="image/*" required class="w-full p-3 bg-white text-black">
    <input type="text" id="price" placeholder="السعر" required class="w-full p-3 rounded text-black">
    <input type="text" id="phone" placeholder="رقم الواتساب" required class="w-full p-3 rounded text-black">

    <select id="subCategory" required class="w-full p-3 rounded text-black">
      <option value="">اختر الفئة</option>
      <option value="تصميم لوجوهات">تصميم لوجوهات</option>
      <option value="تصاميم هندسية">تصاميم هندسية</option>
      <option value="إعلانات Poster">إعلانات Poster</option>
      <option value="مونتاج الفيديوهات">مونتاج الفيديوهات</option>
      <option value="تصميم فيديوهات إعلانية">تصميم فيديوهات إعلانية</option>
    </select>

    <button type="submit" class="w-full bg-indigo-600 p-3 rounded">إضافة الإعلان</button>
  </form>

  <p id="successMsg" class="text-green-400 text-center mt-4 hidden">✅ تم إضافة الإعلان بنجاح</p>

  <script>
    const form = document.getElementById("adForm");
    const successMsg = document.getElementById("successMsg");

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const name = document.getElementById("name").value;
      const price = document.getElementById("price").value;
      const phone = document.getElementById("phone").value;
      const subCategory = document.getElementById("subCategory").value;
      const imageFile = document.getElementById("image").files[0];

      const reader = new FileReader();
      reader.onload = function(event) {
        const imageBase64 = event.target.result;

        const ad = { name, price, phone, subCategory, image: imageBase64 };

        let ads = JSON.parse(localStorage.getItem("ads")) || [];
        ads.push(ad);
        localStorage.setItem("ads", JSON.stringify(ads));

        form.reset();
        successMsg.classList.remove("hidden");
        setTimeout(() => successMsg.classList.add("hidden"), 3000);
      };
      reader.readAsDataURL(imageFile);
    });
  </script>

</body>
</html>
